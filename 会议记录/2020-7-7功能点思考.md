- 技术难点

  - 图片如何存储？用户头像，博文中的图片？

    https://www.cnblogs.com/wangtao_20/p/3440570.html

    文章中提到 比较好的解决方式是 将图片存放在磁盘中 数据库中保存路径

    问了助教 助教也说视频也是同样的存储方式

  - - 用户 user( user_id, username, password, avatar_path) (mysql)

    ​       用户点赞  user_vote( user_id, blog_id_list[] )

    ​       用户关注  user_follow( user_id, user_id_list[] )

    ​       用户粉丝  user_fans( user_id, user_id_list[] )

    ​       还有阅读 转发 评论？

    - 计数的时候 select count(*) where user_id = xxx？count 计数法？

    ​       弊端 首页每条blog都会进行几次统计，都会有一个count 很慢

    - 所以考虑将计数服务从关注服务，粉丝服务，点赞服务中，转发服务中分离开来。 设计专门的计数服务。

    - user_count( follow_count, fan_count, blog_count)

    ​       blog_count( forward_count, comment_count, vote_count)

    ​       ref: https://cloud.tencent.com/developer/article/1049094

    ​       可以考虑用整数的不同bit 来保存，就能够多个计数，只查询一个值就可。

    - 上面说的是针对首页加载的时候需要获取挺多计数的情况。

      但是对于那种高并发的点赞能够怎么进行处理呢？几十万次写吗？

      （评论应该还行，也没办法合并啥的吧？

      点赞方点赞的话正常处理（用户分不同的表 不会造成太严重的事务阻塞

      但是blog_count 表几十万次+1就会造成阻塞。

      所以考虑

    ​      “简单的方案就是隔一段时间才根据点赞 /取消事件集中计算最新的点赞数”

    ​       https://www.v2ex.com/t/654083

    ​      问下助教这个“隔一段时间"是怎么弄得？

    - 解决方案

      - redis 是内存型数据库，很快 mysql mongodb是直接写到硬盘 很慢

      - 全部用redis得话 不能对数据进行备份（突然关机得话就全都没了

        虽然redis也能通过某种形式支持持久化 但还是比较慢
  
      - 一般很吃性能得用redis。然后定时将数据合并到mysql 里面。
  
      并且1G内存也已经能放很多东西。
  
    - 所以这里对于高并发点赞得解决方案就是：redis不断+1，然后隔多久就把数据merge到mysql（+1000啥得）。
  
    - 那么对于突然评论和转发很多能不能也这样呢？
  
      应该也是行的
  
      不过将redis中的多个记录合并到一起然后一次写入mongodb的操作
  
      暂时不是很懂怎么弄。待研究
  
    
  
  - 管理员功能拆分？ 这个暂时不是主要功能 后面
  
  - 发布，查看，修改，删除兴趣及讨论？
  
    - 发布博文？首先不考虑视频，能够编辑文字，图片。
    - 这些文字和图片应该怎么进行划分？存储？
  
- 注册登录，个人资料存储

  - 接口
  - 数据库

- 用户认证 管理员功能拆分

  - 接口
  - 数据库

- 博文增删改查

  - 接口
  - 数据库

- 转发 评论 点赞 高并发问题

  - 接口
  - 数据库

- 

  

  

  

  

  

  